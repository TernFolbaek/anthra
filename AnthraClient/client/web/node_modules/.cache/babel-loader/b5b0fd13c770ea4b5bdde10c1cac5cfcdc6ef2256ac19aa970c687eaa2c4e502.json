{"ast":null,"code":"var _jsxFileName = \"/Users/tyf/Documents/software-programming/personal-coding-projects/Anthra/AnthraClient/client/web/src/Dashboard/Components/Requests/Requests.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './Requests.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Requests = () => {\n  _s();\n  const [requests, setRequests] = useState([]);\n  const userId = localStorage.getItem('userId');\n  useEffect(() => {\n    if (!userId) {\n      return;\n    }\n    fetch(`http://localhost:5001/api/Request/Pending?userId=${userId}`).then(response => {\n      if (!response.ok) {\n        return response.text().then(text => {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        });\n      }\n      return response.json();\n    }).then(data => setRequests(data)).catch(error => console.error('Error fetching requests:', error));\n  }, [userId]);\n  const handleAccept = requestId => {\n    fetch(`http://localhost:5001/api/Request/AcceptRequest?requestId=${requestId}`, {\n      method: 'POST'\n    }).then(response => {\n      if (response.ok) {\n        setRequests(prevRequests => prevRequests.filter(req => req.id !== requestId));\n      } else {\n        return response.text().then(text => {\n          throw new Error(text);\n        });\n      }\n    }).catch(error => console.error('Error accepting request:', error));\n  };\n  const handleDecline = requestId => {\n    fetch(`http://localhost:5001/api/Request/DeclineRequest?requestId=${requestId}`, {\n      method: 'POST'\n    }).then(response => {\n      if (response.ok) {\n        setRequests(prevRequests => prevRequests.filter(req => req.id !== requestId));\n      } else {\n        return response.text().then(text => {\n          throw new Error(text);\n        });\n      }\n    }).catch(error => console.error('Error declining request:', error));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"connections-page\",\n    children: requests.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No connection requests.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }, this) : requests.map(request => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"user-card-img\",\n        src: `http://localhost:5001/${request.senderProfilePicture}` || '/default-profile.png',\n        alt: \"Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: request.senderName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: request.senderEmail\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"connect-button\",\n          onClick: () => handleAccept(request.id),\n          children: \"Accept\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"skip-button\",\n          onClick: () => handleDecline(request.id),\n          children: \"Decline\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 25\n      }, this)]\n    }, request.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 21\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 9\n  }, this);\n};\n_s(Requests, \"MIcAFnHRaJFubpcUtYXSDqOxSqY=\");\n_c = Requests;\nexport default Requests;\nvar _c;\n$RefreshReg$(_c, \"Requests\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","Requests","_s","requests","setRequests","userId","localStorage","getItem","fetch","then","response","ok","text","Error","status","json","data","catch","error","console","handleAccept","requestId","method","prevRequests","filter","req","id","handleDecline","className","children","length","fileName","_jsxFileName","lineNumber","columnNumber","map","request","src","senderProfilePicture","alt","senderName","senderEmail","onClick","_c","$RefreshReg$"],"sources":["/Users/tyf/Documents/software-programming/personal-coding-projects/Anthra/AnthraClient/client/web/src/Dashboard/Components/Requests/Requests.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './Requests.css';\n\ninterface ConnectionRequestDTO {\n    id: number;\n    senderId: string;\n    senderName: string;\n    senderEmail: string;\n    senderProfilePicture?: string;\n    receiverId: string;\n    status: number;\n    requestedAt: string;\n    respondedAt?: string;\n}\n\nconst Requests: React.FC = () => {\n    const [requests, setRequests] = useState<ConnectionRequestDTO[]>([]);\n    const userId = localStorage.getItem('userId');\n\n    useEffect(() => {\n        if (!userId) {\n            return;\n        }\n        fetch(`http://localhost:5001/api/Request/Pending?userId=${userId}`)\n            .then((response) => {\n                if (!response.ok) {\n                    return response.text().then(text => {\n                        throw new Error(`HTTP error! status: ${response.status}`);\n                    });\n                }\n                return response.json();\n            })\n            .then((data) => setRequests(data))\n            .catch((error) => console.error('Error fetching requests:', error));\n    }, [userId]);\n\n    const handleAccept = (requestId: number) => {\n        fetch(`http://localhost:5001/api/Request/AcceptRequest?requestId=${requestId}`, {\n            method: 'POST',\n        })\n            .then((response) => {\n                if (response.ok) {\n                    setRequests((prevRequests) =>\n                        prevRequests.filter((req) => req.id !== requestId)\n                    );\n                } else {\n                    return response.text().then((text) => {\n                        throw new Error(text);\n                    });\n                }\n            })\n            .catch((error) => console.error('Error accepting request:', error));\n    };\n\n    const handleDecline = (requestId: number) => {\n        fetch(`http://localhost:5001/api/Request/DeclineRequest?requestId=${requestId}`, {\n            method: 'POST',\n        })\n            .then((response) => {\n                if (response.ok) {\n                    setRequests((prevRequests) =>\n                        prevRequests.filter((req) => req.id !== requestId)\n                    );\n                } else {\n                    return response.text().then((text) => {\n                        throw new Error(text);\n                    });\n                }\n            })\n            .catch((error) => console.error('Error declining request:', error));\n    };\n\n    return (\n        <div className=\"connections-page\">\n            {requests.length === 0 ? (\n                <p>No connection requests.</p>\n            ) : (\n                requests.map((request) => (\n                    <div key={request.id} className=\"user-card\">\n                        <img className=\"user-card-img\"\n                            src={`http://localhost:5001/${request.senderProfilePicture}` || '/default-profile.png'}\n                            alt=\"Profile\"\n                        />\n                        <h2>{request.senderName}</h2>\n                        <p>{request.senderEmail}</p>\n                        <div className=\"button-container\">\n                            <button\n                                className=\"connect-button\"\n                                onClick={() => handleAccept(request.id)}\n                            >\n                                Accept\n                            </button>\n                            <button\n                                className=\"skip-button\"\n                                onClick={() => handleDecline(request.id)}\n                            >\n                                Decline\n                            </button>\n                        </div>\n                    </div>\n                ))\n            )}\n        </div>\n    );\n};\n\nexport default Requests;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}